<link rel="import" href="../polymer/polymer.html">
<!--<link rel="import" href="../iron-ajax/iron-ajax.html">-->
<link rel="import" href="../iron-image/iron-image.html">
<link rel="import" href="../iron-pages/iron-pages.html">
<link rel="import" href="../app-layout/app-scroll-effects/effects/parallax-background.html">
<link rel="import" href="../app-layout/app-box/app-box.html">
<link rel="import" href="../uvalib-button/uvalib-button.html">
<link rel="import" href="../uvalib-theme/uvalib-theme.html">
<link rel="import" href="../uvalib-models/uvalib-models.html">

<!--
`uvalib-banner`
Library web banner

@demo demo/index.html
-->

<dom-module id="uvalib-banner">
  <template>
    <style is="custom-style" include="uvalib-theme">
      :host {
        display: block;
        width: 100%;
      }
      iron-image {
        width: 100%;
        --iron-image-width: 100%;
        --iron-image-placeholder: {
          background-size: cover;
        }
      }

      [clickable] {
        cursor: pointer;
      }

      .container {
        position: relative;
        height: 600px;
        width: auto;
        background-color: #f3f3f3;
        background-size: cover !important;
        /*
        background: linear-gradient(rgba(0,0,0,.3),rgba(0,0,0,.3)),url(//uvalib.github.io/web-banners/media/annespencer/annespencer.png) no-repeat 50% fixed;
        */
      }

      .text-container {
        max-width: 1044px;
        margin-left: auto;
        margin-right: auto;
        color: var(--color-white);
      }

      .text-container .textTitle {
        @apply(--font-display3);
        font-weight: 900;
        text-align: left;
        color: var(--color-white);
      }
      .text-container .text {
        @apply(--font-display1);
        text-align: left;
        color: var(--color-white);
      }
      .text-container .subText {
        @apply(--font-headline);
        padding-top: 30px;
        text-align: left;
        color: var(--color-white);
      }
      .text-container .subsubText {
        @apply(--font-title);
        padding-top: 0;
        text-align: left;
        color: var(--color-white);
      }

      uvalib-button {
        display: block;
        color: var(--color-white);
        --uvalib-button-bkgrd-color: var(--color-primary-blue);
        padding-top: 25px;
        --uvalib-button-font-weight: bold;
        font-size: 30px;
      }

      /* desktop */
      @media (min-width: 993px) {
        .text-container {
          padding: 50px 30px;
          max-width: 400px;
          margin-left: inherit;
          margin-right: inherit;
        }
        .text-container .text {
          line-height: 32px;
        }
      }
      /* tablet */
      @media (min-width: 601px) and (max-width: 992px) {
        .text-container {
          padding: 50px 30px;
          max-width: 60%;
        }
        .text-container .text {
          line-height: 30px;
        }
      }
      /* mobile */
      @media (max-width: 600px) {
        .text-container {
          padding: 50px 25px;
          max-width: 85%;
        }
        .text-container .text {
          line-height: 30px;
        }
      }

    </style>

    <uvalib-model-banners random="{{banner}}"></uvalib-model-banners>

    <div class="container" clickable="{{_clickable(banner)}}" style$="{{_containerStyle(banner,largeScreen,mediumScreen,smallScreen)}}" hidden="{{!banner}}" on-tap="_tapbanner">
      <div class="text-container">
        <div class="textTitle" hidden="{{!banner.displayTitle}}">{{banner.title}}</div>
        <div class="text" inner-h-t-m-l="{{banner.body}}" hidden="{{!banner.body}}"></div>
      </div>
    </div>

  </template>

  <script>
    Polymer({
      is: 'uvalib-banner',
      properties: {
        smallScreen: Boolean,
        mediumScreen: Boolean,
        largeScreen: {
          type: Boolean,
          value: true
        },
        banner: {
          type: Object,
          value: null
        }
      },
      _clickable: function(){
        if (this.banner && this.banner.link) {
          return true;
        }
        return false;
      },
      _tapbanner: function(){
        if (this.banner && this.banner.link) {
          window.location = this.banner.link;
        }
      },
      _containerStyle: function(){
        if (this.banner) {
          if (this.largeScreen)
            return "background: url("+this.banner.desktopImage.url+") no-repeat top left;";
          else if (this.mediumScreen)
            return "background: url("+this.banner.tabletImage.url+") no-repeat center center;";
          else {
            return "background: url("+this.banner.phoneImage.url+") no-repeat center center;";
          }
        } else {
          return "";
        }
      }
    });
  </script>
</dom-module>
